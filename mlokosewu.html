<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Mloko Sewu | Smart Map PRO</title>
<meta name="theme-color" content="#0f766e" />
<meta name="description" content="Smart Map Interaktif Mloko Sewu Ngebel" />

<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-sA+4wH1zN3Qf3o0bM8qH7s5Qv3l9Y2z1u1pqt1r0X2M="
  crossorigin=""
/>

<style>
:root{
--primary:#0f766e;--primary-light:#14b8a6;--accent:#f59e0b;
--bg:#f8fafc;--text:#1e293b;--muted:#64748b;
--glass:rgba(255,255,255,.9);
--r-xl:28px;--r-lg:20px;--r-md:12px;
--shadow:0 10px 40px -10px rgba(0,0,0,.08);
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;background:var(--bg);color:var(--text)}
.container{max-width:1200px;margin:auto;padding:0 16px}

/* Header */
header{
position:sticky;top:0;z-index:100;height:64px;
background:rgba(255,255,255,.9);backdrop-filter:blur(10px);
border-bottom:1px solid rgba(0,0,0,.05);
display:flex;align-items:center
}
.back{
padding:8px 14px;border-radius:999px;border:1px solid rgba(0,0,0,.06);
background:#fff;cursor:pointer;font-weight:600
}
.back:hover{background:var(--primary);color:#fff}

/* Map */
.map-wrap{
margin:16px 0;border-radius:var(--r-xl);overflow:hidden;
box-shadow:var(--shadow);position:relative
}
#map{height:60vh;min-height:420px;width:100%}

/* Overlay */
.overlay{
position:absolute;left:12px;right:12px;bottom:12px;
background:var(--glass);backdrop-filter:blur(10px);
border-radius:var(--r-lg);padding:12px;
display:flex;justify-content:space-between;align-items:center;
border:1px solid rgba(0,0,0,.06)
}
.loc{display:flex;gap:10px;align-items:center}
.pin{
width:30px;height:30px;border-radius:50%;
background:var(--primary);color:#fff;
display:flex;align-items:center;justify-content:center;font-size:14px
}
.pulse{
width:10px;height:10px;border-radius:50%;background:#22c55e;
box-shadow:0 0 0 4px rgba(34,197,94,.2)
}

/* Actions */
.grid{
display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:14px;margin:16px 0
}
.card{
background:#fff;border-radius:var(--r-lg);padding:16px;
border:1px solid rgba(0,0,0,.05);box-shadow:var(--shadow)
}
.btn{
margin-top:10px;width:100%;padding:12px;border-radius:10px;
border:none;font-weight:700;cursor:pointer
}
.btn-primary{background:var(--primary);color:#fff}
.btn-outline{background:#fff;border:2px solid var(--primary);color:var(--primary)}

/* Layers */
.layers{display:flex;flex-direction:column;gap:10px;margin:10px 0 30px}
.layer{
background:#fff;border:1px solid rgba(0,0,0,.05);
border-radius:var(--r-md);padding:12px 14px;
display:flex;justify-content:space-between;align-items:center;cursor:pointer
}
.layer:hover{background:#f0fdfa;border-color:var(--primary)}
</style>
</head>

<body>

<header>
  <div class="container">
    <button class="back" onclick="history.back()">‚Üê Kembali</button>
  </div>
</header>

<main class="container">

  <!-- MAP -->
  <section class="map-wrap">
    <div id="map"></div>

    <div class="overlay">
      <div class="loc">
        <div class="pin">üìç</div>
        <div>
          <strong>Mloko Sewu</strong><br />
          <small>Ngebel, Ponorogo, Jawa Timur</small>
        </div>
      </div>
      <div class="pulse"></div>
    </div>
  </section>

  <!-- ACTIONS -->
  <div class="grid">
    <div class="card">
      <h3 style="color:var(--primary)">Navigasi Google Maps</h3>
      <p>Buka rute langsung ke Mloko Sewu.</p>
      <button class="btn btn-primary" onclick="openRoute()">Mulai Navigasi</button>
    </div>

    <div class="card">
      <h3 style="color:var(--accent)">Lokasi Saya</h3>
      <p>Deteksi posisi GPS kamu di peta.</p>
      <button class="btn btn-outline" onclick="locateMe()">Deteksi GPS</button>
    </div>
  </div>

  <!-- LAYERS -->
  <div class="layers">
    <div class="layer" onclick="toggleLayer('spot')">
      <span>üì∏ Spot Foto</span>
      <input type="checkbox" id="spot" checked />
    </div>

    <div class="layer" onclick="toggleLayer('fasilitas')">
      <span>üöª Fasilitas</span>
      <input type="checkbox" id="fasilitas" checked />
    </div>

    <div class="layer" onclick="toggleLayer('user')">
      <span>üìç Lokasi Saya</span>
      <input type="checkbox" id="user" checked />
    </div>
  </div>

</main>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-o9N1j7kGStpP4Y1Y7r8X4qfZ0pniS3pSDOMkMt2rt7A="
  crossorigin=""
></script>

<script>
/* =========================
   INIT MAP
========================= */
const mloko = [-7.7875, 111.7439]; // koordinat Mloko Sewu (approx)
const map = L.map('map').setView(mloko, 15);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  maxZoom:19
}).addTo(map);

/* =========================
   MARKERS
========================= */
const spotLayer = L.layerGroup().addTo(map);
const fasilitasLayer = L.layerGroup().addTo(map);
const userLayer = L.layerGroup().addTo(map);

L.marker(mloko).bindPopup("Mloko Sewu").addTo(spotLayer);

L.marker([-7.7882,111.7425]).bindPopup("Toilet").addTo(fasilitasLayer);
L.marker([-7.7869,111.7448]).bindPopup("Parkir").addTo(fasilitasLayer);

/* =========================
   GPS USER
========================= */
function locateMe(){
  if(!navigator.geolocation){alert("GPS tidak didukung");return;}
  navigator.geolocation.getCurrentPosition(pos=>{
    const latlng=[pos.coords.latitude,pos.coords.longitude];
    userLayer.clearLayers();
    L.marker(latlng).bindPopup("Lokasi Saya").addTo(userLayer);
    map.setView(latlng,16);
  },()=>alert("Gagal ambil lokasi"));
}

/* =========================
   GOOGLE ROUTE
========================= */
function openRoute(){
  window.open("https://maps.app.goo.gl/sJ42amT5L6PhjVbA6","_blank");
}

/* =========================
   TOGGLE LAYER
========================= */
function toggleLayer(id){
  const cb=document.getElementById(id);
  cb.checked=!cb.checked;

  const mapLayer={
    spot:spotLayer,
    fasilitas:fasilitasLayer,
    user:userLayer
  }[id];

  if(cb.checked){map.addLayer(mapLayer);}
  else{map.removeLayer(mapLayer);}
}
</script>

</body>
</html>
